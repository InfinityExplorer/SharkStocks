{"ast":null,"code":"import axios from \"axios\";\nexport const searchCompanies = async query => {\n  try {\n    return await axios.get(`https://financialmodelingprep.com/stable/search-name?query=${query}&apikey=${process.env.REACT_APP_API_KEY}`);\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      return error.message;\n    }\n    throw error;\n  }\n};\nexport const getCompanyProfile = async query => {\n  try {\n    const response = await axios.get(`https://financialmodelingprep.com/stable/profile?symbol=${encodeURIComponent(query)}&apikey=${process.env.REACT_APP_API_KEY}`);\n    if (!response.data || response.data.length === 0) {\n      throw new Error(\"Компания не найдена\");\n    }\n    console.log(response.data);\n    return response.data[0];\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      var _error$response, _error$response$data;\n      throw new Error(`API Error: ${((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message}`);\n    }\n    throw new Error(\"Unexpected error occurred\");\n  }\n};\nexport const getKeyMetrics = async query => {\n  try {\n    const response = await axios.get(`https://financialmodelingprep.com/stable/profile?symbol=${encodeURIComponent(query)}&apikey=${process.env.REACT_APP_API_KEY}`);\n    if (!response.data || response.data.length === 0) {\n      throw new Error(\"Компания не найдена\");\n    }\n    console.log(response.data);\n    return response.data[0];\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      var _error$response2, _error$response2$data;\n      throw new Error(`API Error: ${((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || error.message}`);\n    }\n    throw new Error(\"Unexpected error occurred\");\n  }\n};","map":{"version":3,"names":["axios","searchCompanies","query","get","process","env","REACT_APP_API_KEY","error","isAxiosError","message","getCompanyProfile","response","encodeURIComponent","data","length","Error","console","log","_error$response","_error$response$data","getKeyMetrics","_error$response2","_error$response2$data"],"sources":["D:/DProjects/StockApp/frontend/src/api.tsx"],"sourcesContent":["import axios, { AxiosError, AxiosResponse } from \"axios\";\r\nimport { CompanyKeyMetrics, CompanyProfile, CompanySearch } from \"./company\";\r\n\r\nexport interface SearchResponse {\r\n    data: CompanySearch[];\r\n}\r\n\r\nexport const searchCompanies = async (query: string): Promise<AxiosResponse<SearchResponse, any> | string> => {\r\n    try {\r\n        return await axios.get<SearchResponse>(\r\n            `https://financialmodelingprep.com/stable/search-name?query=${query}&apikey=${process.env.REACT_APP_API_KEY}`\r\n        );\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            return error.message;\r\n        }\r\n        throw error;\r\n    }\r\n};\r\n\r\n\r\nexport const getCompanyProfile = async (query: string): Promise<CompanyProfile> => {\r\n    try {\r\n        const response = await axios.get<CompanyProfile[]>(\r\n            `https://financialmodelingprep.com/stable/profile?symbol=${encodeURIComponent(query)}&apikey=${process.env.REACT_APP_API_KEY}`\r\n        );\r\n        \r\n        if (!response.data || response.data.length === 0) {\r\n            throw new Error(\"Компания не найдена\");\r\n        }\r\n        console.log(response.data);\r\n        return response.data[0];\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            throw new Error(`API Error: ${error.response?.data?.message || error.message}`);\r\n        }\r\n        throw new Error(\"Unexpected error occurred\");\r\n    }\r\n};\r\n\r\nexport const getKeyMetrics = async (query: string): Promise<CompanyProfile> => {\r\n    try {\r\n        const response = await axios.get<CompanyKeyMetrics[]>(\r\n            `https://financialmodelingprep.com/stable/profile?symbol=${encodeURIComponent(query)}&apikey=${process.env.REACT_APP_API_KEY}`\r\n        );\r\n        \r\n        if (!response.data || response.data.length === 0) {\r\n            throw new Error(\"Компания не найдена\");\r\n        }\r\n        console.log(response.data);\r\n        return response.data[0];\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error)) {\r\n            throw new Error(`API Error: ${error.response?.data?.message || error.message}`);\r\n        }\r\n        throw new Error(\"Unexpected error occurred\");\r\n    }\r\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAqC,OAAO;AAOxD,OAAO,MAAMC,eAAe,GAAG,MAAOC,KAAa,IAA2D;EAC1G,IAAI;IACA,OAAO,MAAMF,KAAK,CAACG,GAAG,CAClB,8DAA8DD,KAAK,WAAWE,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAC/G,CAAC;EACL,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZ,IAAIP,KAAK,CAACQ,YAAY,CAACD,KAAK,CAAC,EAAE;MAC3B,OAAOA,KAAK,CAACE,OAAO;IACxB;IACA,MAAMF,KAAK;EACf;AACJ,CAAC;AAGD,OAAO,MAAMG,iBAAiB,GAAG,MAAOR,KAAa,IAA8B;EAC/E,IAAI;IACA,MAAMS,QAAQ,GAAG,MAAMX,KAAK,CAACG,GAAG,CAC5B,2DAA2DS,kBAAkB,CAACV,KAAK,CAAC,WAAWE,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAChI,CAAC;IAED,IAAI,CAACK,QAAQ,CAACE,IAAI,IAAIF,QAAQ,CAACE,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MAC9C,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;IAC3C;IACAC,OAAO,CAACC,GAAG,CAACN,QAAQ,CAACE,IAAI,CAAC;IAC1B,OAAOF,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC;EAC3B,CAAC,CAAC,OAAON,KAAK,EAAE;IACZ,IAAIP,KAAK,CAACQ,YAAY,CAACD,KAAK,CAAC,EAAE;MAAA,IAAAW,eAAA,EAAAC,oBAAA;MAC3B,MAAM,IAAIJ,KAAK,CAAC,cAAc,EAAAG,eAAA,GAAAX,KAAK,CAACI,QAAQ,cAAAO,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBL,IAAI,cAAAM,oBAAA,uBAApBA,oBAAA,CAAsBV,OAAO,KAAIF,KAAK,CAACE,OAAO,EAAE,CAAC;IACnF;IACA,MAAM,IAAIM,KAAK,CAAC,2BAA2B,CAAC;EAChD;AACJ,CAAC;AAED,OAAO,MAAMK,aAAa,GAAG,MAAOlB,KAAa,IAA8B;EAC3E,IAAI;IACA,MAAMS,QAAQ,GAAG,MAAMX,KAAK,CAACG,GAAG,CAC5B,2DAA2DS,kBAAkB,CAACV,KAAK,CAAC,WAAWE,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAChI,CAAC;IAED,IAAI,CAACK,QAAQ,CAACE,IAAI,IAAIF,QAAQ,CAACE,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MAC9C,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;IAC3C;IACAC,OAAO,CAACC,GAAG,CAACN,QAAQ,CAACE,IAAI,CAAC;IAC1B,OAAOF,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC;EAC3B,CAAC,CAAC,OAAON,KAAK,EAAE;IACZ,IAAIP,KAAK,CAACQ,YAAY,CAACD,KAAK,CAAC,EAAE;MAAA,IAAAc,gBAAA,EAAAC,qBAAA;MAC3B,MAAM,IAAIP,KAAK,CAAC,cAAc,EAAAM,gBAAA,GAAAd,KAAK,CAACI,QAAQ,cAAAU,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBR,IAAI,cAAAS,qBAAA,uBAApBA,qBAAA,CAAsBb,OAAO,KAAIF,KAAK,CAACE,OAAO,EAAE,CAAC;IACnF;IACA,MAAM,IAAIM,KAAK,CAAC,2BAA2B,CAAC;EAChD;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}